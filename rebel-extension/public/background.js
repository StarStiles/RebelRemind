/**
 * Background Script for Chrome Extension
 *
 * This script initializes the Chrome extension and listens for events such as installation,
 * message passing, and authentication requests.
 *
 * Handles:
 * - Installation event
 * - Message listeners for various requests
 *
 * Documentation generated by ChatGPT
 */

import { handlePostCount, handleGetSchedule } from "./scripts/counter-script.js";
import { authenticateUser } from "./scripts/identity-script.js";

/**
 * Listens for the Chrome extension installation event.
 * This runs once when the extension is first installed or updated.
 */
chrome.runtime.onInstalled.addListener(() => {
  console.log("Extension installed!");
});

/**
 * Listens for messages from content scripts or popup scripts and delegates them to the appropriate script.
 */
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
    switch (message.type) {
        case "POST_COUNT":
            handlePostCount(message, sendResponse);
            return true;

        case "GET_SCHEDULE":
            handleGetSchedule(sendResponse);
            return true;

        case "LOGIN":
            authenticateUser(sendResponse);
            return true;
    }
});
